{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-09-01 14:57:49.208691",
 "css": "@import url('https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&family=Cairo:wght@200..1000&family=Underdog&display=swap');\r\n\r\n.print-format {\r\n    font-size: 9pt;\r\n    font-family: \"Almarai\", sans-serif;\r\n    font-style: normal;\r\n}\r\n\r\n.letter-head-footer { \r\n    margin-left:25mm;\r\n    margin-right:20mm;\r\n    position: absolute; \r\n    bottom: 9mm\r\n}\r\n\r\n.page-number {\r\n    position: absolute; \r\n    bottom: 5mm; \r\n    left: 100mm; \r\n    overflow: visible\r\n}\r\n\r\n.sap { \r\n    font-weight: bold; \r\n    font-size: 11pt; \r\n}\r\n\r\n.signatures {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 350px;\r\n    margin: 1px 3px;\r\n}\r\n\r\n\r\n.invoice {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 1px;\r\n    width: 500px;\r\n}\r\n      \r\n.important {\r\n    font-weight: bold;\r\n}\r\n        \r\n.divider{\r\n    border-left: 2px solid black;\r\n    height: auto;\r\n    margin: 4px 15px;\r\n    margin-right: 0px;\r\n    margin-left: 3px;\r\n}\r\n\r\n.right-section, .left-section {\r\n    width: 34%;\r\n}\r\n\r\n.table th {\r\n    font-weight:bold;\r\n}\r\n        \r\n        \r\n.table td, .table th {\r\n    border: 1px solid #000 !important;\r\n    font-weight: normal;\r\n    color: #000;\r\n    text-align:center;\r\n    font-size: 11px;\r\n    padding: 4px 3px !important;\r\n    word-wrap: break-word;\r\n    /*border-collapse:collapse;*/\r\n    /*border-radius:5% !important;*/\r\n}\r\n\r\n/*@media print {*/\r\n/*    .table td, .table th {*/\r\n/*        word-wrap: normal;*/\r\n/*    }*/\r\n/*}*/\r\n\r\n.table {\r\n    margin: 20px 0px !important;\r\n    width:100%;\r\n    border-collapse: separate;\r\n    /*border: 1px solid black !important;*/\r\n    /*border-collapse:separate;*/\r\n    /*overflow:hidden;*/\r\n    /*border-radius:3% !important;*/\r\n}\r\n.print-format img {\r\n    max-width: 500;\r\n}\r\n\r\n.invoice { \r\n    display: flex; \r\n    justify-content: space-between; \r\n    padding: 2px; \r\n    width: 100%; \r\n}\r\n    \r\n.divider { \r\n    border-left: 2px solid black; \r\n    height: auto; \r\n    margin: 4px 15px; \r\n}\r\n\r\n.total-rows td {\r\n    background-color:#fffae1 !important;\r\n}\r\n   \r\n.table th {\r\n    background-color:#fffae1;\r\n}\r\n\r\n.table td {\r\n    background-color:#fffae1;\r\n}\r\n\r\n.qr { \r\n    display: flex; \r\n    align-items: center; \r\n    margin-left: 20px; \r\n    max-width: 500px;\r\n    flex-direction: column; \r\n}\r\n\r\n@media print{\r\n    .print-format {\r\n        padding:2px !important;\r\n    }\r\n    \r\n    .table {\r\n        border-collapse:separate !important;\r\n    }\r\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value, fieldmeta, get_width, get_align_class with context -%}\n\n{% if print_settings.repeat_header_footer %}\n    <div id=\"header-html\">\n        {% if letter_head and not no_letterhead %}\n            <div class=\"letter-head\">{{ letter_head }}</div>\n        {% else%}\n             <div>\n               <table>\n                <tr></tr>\n               </table>\n               </div>\n        {% endif %}\n   </div>\n{% endif %}\n\n<div class=\"invoice-section\">\n    <!--Heading-->\n    <div style=\"text-align: center;\">\n        <p style=\"text-algin: center; font-size:18px; font-weight: bold; margin-bottom:15px;\">{{ _(\"Partial Invoice Template\") }}</p>\n    </div>\n    \n    <!-- Details Section -->\n    <div class=\"invoice\">\n        \n        <!--Right Section-->\n        <div class=\"right-section\">\n            {% set custom_government_contract_no = frappe.db.get_value(\"Project\", doc.project, \"custom_government_contract_no\")%}\n            \n            <p><span class=\"important\"  >\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0625\u0644\u0649:</span>  {{doc.customer_name}}</p>\n            <p><span class=\"important\">\u0627\u0644\u0639\u0646\u0648\u0627\u0646:</span> {{ doc.address_display or '' }}</p>\n            <p><span class=\"important\">\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a:</span>{{ doc.tax_id or '' }}</p>\n            <p><span class=\"important\">\u0631\u0642\u0645 \u0627\u0644\u0639\u0642\u062f:</span> {{custom_government_contract_no or ''}}</p>\n            <p><span class=\"important\">\u0645\u0631\u062c\u0639 \u0627\u0644\u0639\u0645\u064a\u0644:</span> {{doc.custom_customer_reference}}</p>\n        </div>\n        \n        <!--Divider-->\n        <div class=\"divider\"style=\"border:none;padding: 0 10px;\"></div>\n         \n        <!-- QR Code -->\n        <div class=\" qr\">\n            {% set files = frappe.get_all('File', filters={'attached_to_doctype': 'Sales Invoice', 'attached_to_name': doc.name, 'is_private':0}, fields=['file_name', 'file_url'], limit=1) %}\n            {%- for file in files -%}\n               <img src=\"{{ file.file_url}}\" alt=\"{{ file.file_name }}\" />\n            {%- endfor -%} \n        </div>\n        \n        <!--Middle Section-->\n        <div class=\"middle-section\" style=\"width:20%;\">\n            <p><span class=\"important\">\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:<br></span> {{ doc.posting_date }}</p>\n            <p><span class=\"important\">\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:<br></span> {{ doc.name }}</p>\n            <p style=\"color:red;text-align:right;font-size:15px\"> <b> \u062f\u0641\u0639\u0629 \u062c\u0632\u0626\u064a\u0629</b></p>\n        </div>\n        \n        <div class=\"divider\"></div>\n        \n        <!--Left Section-->\n        <div class=\"left-section\">\n            <p class=\"text-center\"><span class=\"important\">\u0645\u0624\u0633\u0633\u0629 \u0627\u0644\u0633\u0647\u0644\u064a \u0644\u0644\u0645\u0642\u0627\u0648\u0644\u0627\u062a</span></p>\n            <p><span class=\"important\">\u0627\u0644\u0639\u0646\u0648\u0627\u0646:</span> \u062c\u062f\u0629\u060c \u062d\u064a \u0627\u0644\u0645\u0631\u0648\u0629\u060c 3 \u0645\u0642\u0627\u0628\u0644 \u0634\u064a\u0646\u0643 \u0627\u0644\u0645\u0637\u0627\u0631</p>\n            <p><span class=\"important\">\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0631\u064a\u062f\u064a:</span> \u0635.\u0628 7238 \u062c\u062f\u0629 21462</p>\n            <p><span class=\"important\">\u0647\u0627\u062a\u0641:</span> 012 658 2222</p>\n            <p><span class=\"important\">\u062c\u0648\u0627\u0644:</span> 059 329 8963</p>\n            <p><span class=\"important\">\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:</span> invoice@alsalhy.net</p>\n            <p><span class=\"important\">\u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a:</span> 4030009912</p>\n            <p><span class=\"important\">\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a:</span> 300189259400003</p>\n        </div>\n    </div>\n    \n    <table class=\"table \" style=\"table-layout: fixed; margin: 2px 0; text-align: center;\">\n        {% set data = get_final_part_invoice_template_data(doc.items, doc)%}\n           \n        {% set ds = namespace(discount=0) %} \n        {% set pl = namespace(penalty=0) %}\n        {% set cs = namespace(colspan=0) %}\n        {% for d in data %}\n            {% if d.custom_item_discount_amount > 0 %}\n                {% set ds.discount = 1 %}\n            {% endif %}\n            \n            {% if d.penalty_amnt > 0 %}\n                {% set pl.penalty = 1 %}\n            {% endif %}\n        {% endfor %}\n        \n        {% if ds.discount == 1 and pl.penalty == 1 %}\n            {% set cs.colspan = 14 %}\n        {% elif ds.discount == 1 and pl.penalty == 0 %}\n            {% set cs.colspan = 13 %}\n        {% elif ds.discount == 0 and pl.penalty == 1 %}\n            {% set cs.colspan = 12 %}\n        {% elif ds.discount == 0 and pl.penalty == 0 %}\n            {% set cs.colspan = 11 %}\n        {% endif %}\n            \n        <thead>\n            <tr>\n                <th style=\"width: 3%;  line-height: 1; border-radius: 0px 10px 0px 0px;\">Sr</th>\n                <th style=\"width: 8%;  line-height: 1;\">Work Order No</th>\n                <th style=\"width: 7%;  line-height: 1;\">Work Order Type</th>\n                <th style=\"width: 21%; line-height: 1;\" colspan=\"2\">Work Order Description</th>\n                <th style=\"width: 7%;  line-height: 1;\">Cost Holder</th>\n                <th style=\"width: 9%; line-height: 1;\" colspan=\"2\">Achievment Date</th>\n                {% if ds.discount == 1 %}\n                    <th style=\"width: 7%;  line-height: 1;\">Total Amount Before Discount</th>\n                    <th style=\"width: 6%;  line-height: 1; \">Item Discount Amount</th>\n                {% endif %}\n                <th style=\"width: 7%;  line-height: 1;\">Final Taxable Amount</th>\n                <th style=\"width: 4%;  line-height: 1;\">Tax %</th>\n                <th style=\"width: 7%;  line-height: 1;\">Tax Amount</th>\n                {% if pl.penalty == 1 %}\n                    <th style=\"width: 7%;  line-height: 1;\">Penalty Amount</th>\n                {% endif %}\n                \n                <th style=\"width: 7%;  line-height: 1; border-radius: 10px 0px 0px 0px;\">Total Included Tax</th> \n            </tr>\n        </thead>\n        \n        <tbody>\n            \n            <!--Items Row-->\n           \n            \n            \n            {% for d in data %}\n                <tr>\n                    <td style=\"width: 3%;  line-height: 1; background-color:#ffffff;\">{{ loop.index }}</td>\n                    <td style=\"width: 8%;  line-height: 1; background-color:#ffffff; background-color:#ffffff;\">{{ d.work_order_no or '' }}</td>\n                    <td style=\"width: 7%;  line-height: 1; background-color:#ffffff;\">{{ d.work_order_type or '' }}</td>\n                    <td style=\"width: 21%;  line-height: 1; background-color:#ffffff;\" colspan=\"2\">{{ d.work_order_description or '' }}</td>\n                    <td style=\"width: 7%;  line-height: 1; background-color:#ffffff;\">{{ d.cost_holder or  \"\"}}</td>\n                    <td style=\"width: 9%;  line-height: 1; background-color:#ffffff;\" colspan=\"2\">{{ frappe.utils.get_datetime(d.achievment_date).strftime(\"%d-%m-%Y\") }}</td>\n                    {% if ds.discount == 1 %}\n                        {% if d.total_amnt_before_discount < 0 %}\n                            <td style=\"width: 7%;  line-height: 1; background-color:#ffffff; color:red;\">{{ frappe.format(\"%.2f\"|format(d.total_amnt_before_discount), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                        {% else %}\n                            <td style=\"width: 7%;  line-height: 1; background-color:#ffffff;\">{{ frappe.format(\"%.2f\"|format(d.total_amnt_before_discount), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                        {% endif %}\n                        <td style=\"width: 6%;  line-height: 1; background-color:#ffffff; color:red;\">{{ frappe.format(\"%.2f\"|format(d.custom_item_discount_amount), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                       \n                    {% endif %}\n                    <td style=\"width: 7%;  line-height: 1; background-color:#ffffff;\">{{ frappe.format(\"%.2f\"|format(d.total_amnt_before_discount - d.custom_item_discount_amount), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                    <td style=\"width: 4%;  line-height: 1; background-color:#ffffff;\">{{ d.tax }}</td>\n                    <td style=\"width: 7%;  line-height: 1; background-color:#ffffff;\">{{ frappe.format(\"%.2f\"|format(d.tax_amnt), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                    {% if pl.penalty == 1 %}\n                        <td style=\"width: 7%;  line-height: 1; background-color:#ffffff; color:red;\">{{ frappe.format(\"%.2f\"|format(d.penalty_amnt), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                    {% endif %}\n                    <td style=\"width: 7%;  line-height: 1; background-color:#ffffff;\">{{ frappe.format(\"%.2f\"|format(d.total_included_tax), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td> \n                </tr>\n                \n            {% endfor %}\n           \n           {% if ds.discount == 1 %} \n            \n            <tr class=\"total-rows\">\n                <td colspan={{ cs.colspan }} style=\"text-align:right;\">\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0642\u0628\u0644 \u0627\u0644\u062d\u0633\u0648\u0645\u0627\u062a </td>\n                {% if (data|sum(attribute='total_amnt_before_discount')) < 0 %}\n                    <td colspan=\"1\" style=\"color:red; text-align:right;\">{{ frappe.format(\"%.2f\"|format(data|sum(attribute='total_amnt_before_discount')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                {% else %}\n                   <td colspan=\"1\" style=\"text-align:right;\">{{ frappe.format(\"%.2f\"|format(data|sum(attribute='total_amnt_before_discount')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                {% endif %}\n                \n            </tr>\n            \n            <tr class=\"total-rows\">\n                <td colspan={{ cs.colspan }} style=\"text-align:right;\"> \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062d\u0633\u0648\u0645\u0627\u062a </td>\n                {% if (data|sum(attribute='custom_item_discount_amount')) < 0 %}\n                    <td colspan=\"1\" style=\"color:red; text-align:right;\">{{  frappe.format(\"%.2f\"|format(data|sum(attribute='custom_item_discount_amount')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                {% else %}\n                    <td colspan=\"1\" style=\"text-align:right;\">{{  frappe.format(\"%.2f\"|format(data|sum(attribute='custom_item_discount_amount')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }}</td>\n                {% endif %}\n                \n            </tr>\n            \n            {% endif %}\n            \n            <tr class=\"total-rows\">\n                <td colspan={{ cs.colspan }} style=\"text-align:right;\"> \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u062e\u0627\u0636\u0639 \u0644\u0644\u0636\u0631\u064a\u0628\u0629 </td>\n                {% if (data|sum(attribute='total_amnt_before_discount') - (data|sum(attribute='custom_item_discount_amount'))) < 0 %}\n                    <td colspan=\"1\" style=\"color:red; text-align:right;\">{{ frappe.format(\"%.2f\"|format(data|sum(attribute='total_amnt_before_discount') - (data|sum(attribute='custom_item_discount_amount'))), \"Currency\")|replace(\"\u0631.\u0633\", \"\") or \"\" }}</td>\n                {% else %}\n                    <td colspan=\"1\" style=\"text-align:right;\">{{ frappe.format(\"%.2f\"|format(data|sum(attribute='total_amnt_before_discount') - (data|sum(attribute='custom_item_discount_amount'))), \"Currency\")|replace(\"\u0631.\u0633\", \"\") or \"\" }}</td>\n                {% endif %}\n                \n            </tr>\n            \n            <tr class=\"total-rows\">\n                <td colspan={{ cs.colspan }} style=\"text-align:right;\"> \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 15%</td>\n                {% if (data|sum(attribute='tax_amnt')) < 0 %}\n                     <td colspan=\"1\" style=\"color:red; text-align:right;\">{{  frappe.format(\"%.2f\"|format(data|sum(attribute='tax_amnt')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }} </td>\n                {% else %}\n                     <td colspan=\"1\" style=\"text-align:right;\">{{  frappe.format(\"%.2f\"|format(data|sum(attribute='tax_amnt')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }} </td>\n                {% endif %}\n               \n            </tr>\n            \n            <tr class=\"total-rows\">\n                <td colspan={{ cs.colspan }} style=\"text-align:right;\"> \u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0634\u0627\u0645\u0644 \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 15%</td>\n                {% if (data|sum(attribute='total_included_tax')) < 0 %}\n                    <td colspan=\"1\" style=\"color:red; text-align:right;\">{{  frappe.format(\"%.2f\"|format(data|sum(attribute='total_included_tax')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }} </td>\n                {% else %}\n                    <td colspan=\"1\" style=\"text-align:right;\">{{  frappe.format(\"%.2f\"|format(data|sum(attribute='total_included_tax')), \"Currency\")|replace(\"\u0631.\u0633\", \"\") }} </td>\n                {% endif %}\n                \n            </tr>\n            {% if pl.penalty == 1 %}\n                <tr class=\"total-rows\">\n                    <td colspan={{ cs.colspan }} style=\"text-align:right;\"> \u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u063a\u0631\u0627\u0645\u0627\u062a \u0627\u0644\u063a\u064a\u0631 \u062e\u0627\u0636\u0639 \u0644\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 </td>\n                    {% if (doc.discount_amount) < 0 %}\n                        <td colspan=\"1\" style=\"color:red; text-align:right;\">{{ frappe.format(doc.discount_amount, \"Currency\")|replace(\"\u0631.\u0633\", \"\") or \"\" }} </td>\n                    {% else %}\n                        <td colspan=\"1\" style=\"text-align:right;\">{{ frappe.format(doc.discount_amount, \"Currency\")|replace(\"\u0631.\u0633\", \"\") or \"\" }} </td>\n                    {% endif %}\n                    \n                </tr>\n                \n                <tr class=\"total-rows\">\n                    <td colspan={{ cs.colspan }} style=\"text-align:right;  border-radius: 0px 0px 10px 0px;\"> \u0635\u0627\u0641\u064a \u0627\u0644\u0645\u0628\u0644\u063a  \u0634\u0627\u0645\u0644 \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629 </td>\n                    {% if ((data|sum(attribute='total_included_tax'))) < 0 %}\n                        <td colspan=\"1\" style=\"color:red; text-align:right;  border-radius: 0px 0px 0px 10px;\">{{ frappe.format((\"%.2f\"|format(data|sum(attribute='total_included_tax')))|float - doc.discount_amount, \"Currency\")|replace(\"\u0631.\u0633\", \"\") or \"\" }} </td>\n                    {% else %}\n                        <td colspan=\"1\" style=\"text-align:right;  border-radius: 0px 0px 0px 10px;\">{{ frappe.format((\"%.2f\"|format(data|sum(attribute='total_included_tax')))|float - doc.discount_amount, \"Currency\")|replace(\"\u0631.\u0633\", \"\") or \"\" }} </td>\n                    {% endif %}\n                </tr>\n            {% endif %}\n            \n        </tbody>\n    </table>\n    \n    <div class=\"signatures\">\n        <div class=\"signature\"><span class=\"sap\">\u062a\u0648\u0642\u064a\u0639 \u0627\u0644\u0645\u0642\u0627\u0648\u0644</span></div>\n        <div class=\"signature\"><span class=\"sap\">\u062e\u062a\u0645 \u0627\u0644\u0645\u0642\u0627\u0648\u0644</span></div>\n    </div>\n</div>\n\n{% if print_settings.repeat_header_footer %}\n<div id=\"footer-html\">\n    {% if footer %}\n    <div class=\"letter-head-footer\"> {{ footer }} </div>\n    {% endif %}\n    <p class=\"text-center small page-number visible-pdf\">\n        {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }} </p>\n</div>\n{% endif %}",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-09-16 15:44:59.133783",
 "modified_by": "Administrator",
 "module": "Alsahly",
 "name": "222 Partial Invoice Templates - \u0627\u0644\u062c\u0632\u0626\u064a\u0629",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}